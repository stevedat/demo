<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Login</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body data-page="login">
  <div class="login-container">
    <h2 data-i18n="login_title">Đăng nhập</h2>
    <form id="login-form">
      <label for="tenant" data-i18n="tenant">Trường (Tenant)</label>
      <select id="tenant" name="tenant"></select>
      <label for="role" data-i18n="role">Vai trò</label>
      <select id="role" name="role">
        <option value="super_admin">Super Admin</option>
        <option value="tenant_admin">Tenant Admin - Sunshine</option>
        <option value="tenant_admin">Tenant Admin - Rainbow</option>
        <option value="teacher">Teacher - Sunshine</option>
        <option value="teacher">Teacher - Rainbow</option>
        <option value="parent">Parent - Sunshine</option>
        <option value="parent">Parent - Rainbow</option>
      </select>
      <label for="email" data-i18n="email">Email</label>
      <input type="email" id="email" name="email" required>
      <button type="button" id="fill-account" style="margin:8px 0 8px 0">Chọn tài khoản mẫu</button>
      <label for="password" data-i18n="password">Mật khẩu</label>
      <input type="password" id="password" name="password" required>
      <button type="submit" data-i18n="signin">Đăng nhập</button>
    </form>
    <div style="margin-top:10px;font-size:12px;color:#888" data-i18n="note_mock">Demo tĩnh: không kiểm tra tài khoản thật.</div>
    <select id="locale" style="margin-top:10px;"></select>
  </div>
  <script>
    // Tự động điền email mẫu khi chọn role
    document.getElementById('fill-account').onclick = function() {
      const roleSel = document.getElementById('role');
      const tenantSel = document.getElementById('tenant');
      const emailInput = document.getElementById('email');
      const role = roleSel.value;
      let email = '', t = tenantSel.value;
      if (role === 'super_admin') {
        email = 'super.admin@example.com';
      } else if (role === 'tenant_admin') {
        if (roleSel.selectedIndex === 1) { email = 'admin.sunshine@example.com'; t = 'sunshine'; }
        else { email = 'admin.rainbow@example.com'; t = 'rainbow'; }
      } else if (role === 'teacher') {
        if (roleSel.selectedIndex === 3) { email = 'teacher1.sunshine@example.com'; t = 'sunshine'; }
        else { email = 'teacher1.rainbow@example.com'; t = 'rainbow'; }
      } else if (role === 'parent') {
        if (roleSel.selectedIndex === 5) { email = 'binh.parent.sunshine@example.com'; t = 'sunshine'; }
        else { email = 'cuong.parent.rainbow@example.com'; t = 'rainbow'; }
      }
      emailInput.value = email;
      tenantSel.value = t;
    };

    document.getElementById('login-form').onsubmit = function(e) {
      e.preventDefault();
      const t = document.getElementById('tenant').value;
      const r = document.getElementById('role').value;
      const loc = document.getElementById('locale').value || 'vi-VN';
      const email = document.getElementById('email').value;
      localStorage.setItem('active_locale', loc);
      localStorage.setItem('active_tenant', t);
      localStorage.setItem('active_role', r);
      localStorage.setItem('active_email', email);
      const route = {
        super_admin: 'super-admin.html',
        tenant_admin: 'admin.html',
        teacher: 'teacher.html',
        parent: 'parent.html'
      }[r];
      const qs = `?tenant=${encodeURIComponent(t)}&role=${encodeURIComponent(r)}&locale=${encodeURIComponent(loc)}`;
      window.location.href = route + qs;
    };
  </script>
  <script src="app.js"></script>
</body>
</html>
